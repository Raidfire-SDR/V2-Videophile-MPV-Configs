###########CONFIG ############
#--log-file=log.txt


--scale=ewa_lanczossharp
--cscale=ewa_lanczossharp
--dscale=mitchell
--correct-downscaling=yes
--linear-downscaling=yes
--sigmoid-upscaling=yes
--vo=gpu-next
--gpu-api=auto
--hwdec=auto
--deband=no


#-af [dynaudnorm=f=200:g=-20:r=0.01:h=rl,rr,lf] 
--hwdec-codecs=all
--saturation=10
--brightness=0
--contrast=0
--gamma=0
####################Display / Window######################
--ontop
--fs-screen=0
--screen=0
--fullscreen=yes
--no-hidpi-window-scale
--geometry=100%:0%
################################scaling########################

################################Audio#############################
--audio-spdif=ac3,dts,dts-hd,eac3,truehd
--audio-device=wasapi/{350ba0f8-4a11-4bc7-b7f5-da025b1a30df}
#--audio-device= wasapi/{1a782154-9a5f-4eba-af2a-aab6bcaa72c5}
--volume=50
--alang=eng
################################Colourspace#######################

#--vf=format=colorlevels=auto:colormatrix=auto
#--video-output-levels=auto
#################################Dither###########################
--temporal-dither=yes
--dither-depth=auto
#################################HDR##############################
#video-sync=display-resample
#interpolation=yes
#tscale=oversample
#target-colorspace-hint=yes

######################Misc / OSD#################################
#no-osd-bar
#--no-title-bar
#--keep-open
#--save-position-on-quit
#--resume-playback-check-mtime
#--save-position-on-quit
--osd-font-size=60
#################Tone Mapping Profiles#####################
[FULL-HD] # 1920x1080 

--saturation=10
--brightness=0
--contrast=0
--gamma=0
--glsl-shaders-append="~~/adaptive-sharpen.glsl"
--scale=ewa_lanczossharp
--cscale=ewa_lanczossharp
--dscale=mitchell
--correct-downscaling=yes
--linear-downscaling=yes
--sigmoid-upscaling=yes
osd-playing-msg= "Detected 1080p or Lower, Enabling Scalers" 
osd-playing-msg-duration=10000
video-sync=display-resample
interpolation=yes
tscale=oversample


[bt.2100-hlg]
profile-cond=get("video-params/gamma") == "hlg"
profile-restore=copy
target-prim=auto
target-trc=hlg
d3d11-output-csp=pq
saturation=10
brightness=0
contrast=0
gamma=0
osd-playing-msg= "HLG HDR Profile Applied" 
osd-playing-msg-duration=10000
#--video-unscaled
--libplacebo-opts=tone_map_metadata=any
video-sync=display-resample
interpolation=yes
tscale=oversample

[bt.2020]
target-peak=2000
target-prim=bt.2020
target-trc=pq
target-contrast=inf
d3d11-output-csp=pq
saturation=10
brightness=0
contrast=0
gamma=0
osd-playing-msg= "BT.2020 Profile Applied" 
osd-playing-msg-duration=5000
--video-unscaled
video-sync=display-resample
interpolation=yes
tscale=oversample


[st2094-40]
tone-mapping=st2094-40
profile-cond=get("video-params/primaries") == "st2094-40" and get("video-params/gamma") == "st2094-40" and get("video-out-params/max-luma") > 203
profile-restore=copy
hdr-peak-percentile=99.995
hdr-contrast-recovery=0.30
hdr-compute-peak=no
target-prim=auto
target-colorspace-hint=yes
target-trc=pq
--target-contrast=inf
d3d11-output-csp=pq
saturation=10
brightness=0
contrast=0
gamma=0
osd-playing-msg= "HDR10+ Profile Applied" 
osd-playing-msg-duration=5000
--video-unscaled
--libplacebo-opts=tone_map_metadata=hdr10plus
target-peak=1000
video-sync=display-resample
interpolation=yes
tscale=oversample

[bt.2100-pq]

profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "pq"
profile-restore=copy
target-trc=pq
#target-prim=bt.2020
target-peak=1000
#target-contrast=inf
d3d11-output-csp=pq
saturation=10
saturation=10
contrast=5
gamma=4
osd-playing-msg= "HDR10 Profile Applied" 
osd-playing-msg-duration=5000
--video-unscaled
target-prim=auto
tone-mapping=st2094-40
hdr-peak-percentile=99.995
hdr-contrast-recovery=0.30
--gamut-mapping-mode=auto
--libplacebo-opts=tone_map_metadata=any
target-colorspace-hint=yes
video-sync=display-resample
interpolation=yes
tscale=oversample

[bt.2100-pq-int]
profile-restore=copy
target-trc=pq
target-prim=auto
target-peak=1000
target-contrast=inf
d3d11-output-csp=pq
saturation=10
contrast=5
gamma=4
brightness=10
--video-unscaled
tone-mapping=st2094-40
hdr-compute-peak=no
target-colorspace-hint=yes

osd-playing-msg= "HDR10 Profile Applied" 
osd-playing-msg-duration=5000
--libplacebo-opts=tone_map_metadata=any


[HDR_MODE:DOVI]
profile-cond=get("video-params/primaries") == "bt.709" and get("video-params/gamma") == "bt.1886" and get("video-out-params/max-luma") > 403
profile-restore=copy
target-trc=pq
target-prim=bt.2020
target-peak=2000
target-contrast=inf
d3d11-output-csp=pq
saturation=10
contrast=0
gamma=0
hdr-compute-peak=yes
--video-unscaled
brightness=0
osd-playing-msg= "Dolby Vision Mapped to HDR10 Profile Applied" 
osd-playing-msg-duration=5000
--libplacebo-opts=tone_map_metadata=any
target-colorspace-hint=yes
video-sync=display-resample
interpolation=yes
tscale=oversample
[openexr]

profile-cond=get("file-format") == 'exr_pipe'
profile-restore=copy
target-prim=bt.2020
target-trc=linear
tone-mapping=st2094-40
saturation=10
brightness=0
contrast=0
gamma=0
--video-unscaled
video-sync=display-resample
interpolation=yes
tscale=oversample


[HDR_MODE:SDR_HDR_EFFECT] 
profile-restore=copy
target-trc=pq
target-prim=bt.2020
# Higher value = stronger effect
target-peak=406 
tone-mapping=spline
# All other values make the colors look awful in my opinion. 
inverse-tone-mapping=yes
d3d11-output-csp=pq
saturation=10
brightness=0
contrast=0
gamma=0
osd-playing-msg= "Normal SDR Viewable in HDR Profile Applied" 
osd-playing-msg-duration=5000
video-sync=display-resample
interpolation=yes
tscale=oversample

[HDR_MODE:SDR]
profile-restore=copy
target-trc=pq
target-prim=bt.2020
#Seems to be some kind of magic number, higher values do not have any effect 
target-peak=207 
tone-mapping=bt.2390
inverse-tone-mapping=yes
d3d11-output-csp=pq
saturation=10
brightness=0
contrast=0
gamma=0
osd-playing-msg= "SDR to Fake HDR Profile Applied" 
osd-playing-msg-duration=5000
video-sync=display-resample
interpolation=yes
tscale=oversample

[HDR_MODE:DOVI]
profile-cond=get("video-params/primaries") == "bt.709" and get("video-params/gamma") == "bt.1886" and get("video-out-params/max-luma") > 403
profile-restore=copy
target-trc=pq
target-prim=bt.2020
#Adjust this to the peak brightness of your display. e.g. 800 for LG CX
target-peak=2300
#Only necessary if you are switching between different profiles like me SDR_TO_HDR tonemap profile
target-contrast=inf
d3d11-output-csp=pq
saturation=5
contrast=5
gamma=5
osd-playing-msg= "Dolby Vision Mapped to HDR10 Profile Applied" 
osd-playing-msg-duration=5000
video-sync=display-resample
interpolation=yes
tscale=oversample

[BT.709]
profile-cond=get("video-params/primaries") == "bt.709" 
profile-restore=copy
saturation=0
brightness=0
contrast=0
gamma=0
#d3d11-output-csp=srgb
target-trc=srgb
#target-trc==bt.1886
osd-playing-msg= "Standard SDR Profile Applied" 
osd-playing-msg-duration=5000
video-sync=display-resample
interpolation=yes
tscale=oversample

[FS0]
profile-restore=copy
--fs-screen=0
--screen=0
--fullscreen=yes
--no-hidpi-window-scale
geometry=100%:0%

[FS1]
profile-restore=copy
--fs-screen=1
--screen=1
--fullscreen=yes
--no-hidpi-window-scale
geometry=100%:0%

[FS2]
profile-restore=copy
--fs-screen=2
--screen=2
--fullscreen=yes
--no-hidpi-window-scale
geometry=100%:0%
	
[FLUSH]
profile-restore=copy
#d3d11-output-csp=srgb
saturation=10
brightness=0
contrast=0
gamma=0

[Digital-Audio]
profile-desc = "Digital Audio"
--audio-spdif=ac3,dts,dts-hd,eac3,truehd
--audio-device=wasapi/{350ba0f8-4a11-4bc7-b7f5-da025b1a30df}


[enc-f-webm]
profile-desc = "VP9 + Opus (for WebM)"
of = webm
profile = enc-v-vp9
profile = enc-a-opus
ofopts = ""
[enc-f-mp4]
profile-desc = "H.264 + AAC (for MP4)"
of = mp4
profile = enc-v-h264
profile = enc-a-aac
## equivalent to using qt-faststart tool
## can be used to speed up seeking when streaming
# ofopts = movflags=+faststart
